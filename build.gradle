buildscript {
    repositories {
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath 'com.bmuschko:gradle-cargo-plugin:2.2.3'
    }
}

plugins {
    id 'war'
    id 'groovy'
    id 'java'
    id "com.mkring.wildlydeplyplugin.deploy-wildfly-plugin" version "0.2.4"
    id 'idea'
}

repositories {
    jcenter()
    maven {
        url "https://plugins.gradle.org/m2/"
    }
}

apply plugin: 'com.bmuschko.cargo'

cargo {
    containerId = 'wildfly10x'
    port = 8080

    deployable{
        file = file('build/libs/CityGenerator.war')
        context = 'citygenerator'
    }

    local{
        homeDir = file('/home/roughtomato/wildfly10')
    }
}

dependencies {
    compile "gradle.plugin.com.mkring.wildlydeplyplugin:wildfly-deploy-gradle-plugin:0.2.4"
    providedCompile 'javax.servlet:javax.servlet-api:3.1.0'
    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-core:2.7.19'
    testCompile 'io.github.bonigarcia:webdrivermanager:1.6.1'
    testCompile 'org.seleniumhq.selenium:selenium-java:3.3.1'
    compile group: 'javax.inject', name: 'javax.inject', version: '1'
    testCompile group: 'javax.inject', name: 'javax.inject', version: '1'
    def cargoVersion = '1.5.0'
    cargo "org.codehaus.cargo:cargo-core-uberjar:$cargoVersion",
            "org.codehaus.cargo:cargo-ant:$cargoVersion"
}

apply plugin: "com.mkring.wildlydeplyplugin.deploy-wildfly-plugin"